<!-- Sidebar -->
<aside class="sidebar">
    <div class="sidebar-container">
        <!-- Logo -->
        <div class="logo-wrapper">
            <div class="logo">
                <div class="logo-img">
                    <img src="/images/memofy-logo.png" alt="Memofy Logo" />
                </div>
                <h2>Memofy</h2>
            </div>
        </div>

        <!-- Main Navigation -->
        <nav class="main-nav">
            <ul>
                <li class="<%= path === '/admin-dashboard' ? 'active' : '' %>">
                    <a href="/admin-dashboard">
                        <!-- <i data-lucide="layout-grid"></i> -->
                        <img src="<%= path === '/admin-dashboard' ? '/images/dashboards.png' : '/images/dashboards-in.png' %>"
                            alt="Dashboard" class="nav-icon">
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="<%= path === '/admin/users' ? 'active' : '' %>">
                    <a href="/admin/users">
                        <!-- <i data-lucide="users"></i> -->
                        <img src="<%= path === '/admin/users' ? '/images/group.png' : '/images/group-in.png' %>"
                            alt="Users" class="nav-icon">
                        <span>Users</span>
                    </a>
                </li>
                <li class="<%= path === '/log' ? 'active' : '' %>">
                    <a href="/log">
                        <img src="<%= path === '/log' ? '/images/clipboard.png' : '/images/clipboard-in.png' %>"
                            alt="Memos" class="nav-icon">
                        <span>Memos</span>
                    </a>
                </li>
                <li class="<%= path === '/admin/archive' ? 'active' : '' %>">
                    <a href="/admin/archive">
                        <i data-lucide="archive" style="width: 20px; height: 20px; color: <%= path === '/admin/archive' ? '#1C89E3' : '#64748b' %>;"></i>
                        <span>Archive</span>
                    </a>
                </li>
                <li class="<%= path === '/calendar' ? 'active' : '' %>">
                    <a href="/admin/calendar">
                        <img src="<%= path === '/calendar' ? '/images/calendar.png' : '/images/calendar-in.png' %>"
                            alt="Calendar" class="nav-icon">
                        <span>Calendar</span>
                    </a>
                </li>
                <li class="<%= path === '/report' ? 'active' : '' %>">
                    <a href="/admin/report">
                        <img src="<%= path === '/report' ? '/images/report.png' : '/images/report-in.png' %>"
                            alt="Report" class="nav-icon">
                        <span>Report</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Bottom Section -->
        <div class="bottom-nav">
            <a href="#" class="nav-item" id="logoutBtn">
                <i data-lucide="log-out"></i>
                <span>Logout</span>
            </a>

            <!-- Profile Section -->
            <div class="profile-section" id="profileSection" style="cursor: pointer;">
                <img src="<%= user.profilePicture || '/images/memofy-logo.png' %>" alt="Profile" class="profile-img"
                    id="navProfileImg">
                <div class="profile-info">
                    <h4 class="profile-name" id="navProfileName">
                        <%= (user.firstName && user.lastName) ? user.firstName + ' ' + user.lastName : user.name
                            || 'User' %>
                    </h4>
                    <p class="profile-email" id="navProfileEmail">
                        <%= user.email || 'email@example.com' %>
                    </p>
                </div>
            </div>
        </div>
    </div>
</aside>

<!-- Profile Edit Modal -->
<div id="profileEditModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Edit Profile</h2>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <form id="profileEditForm">
                <input type="hidden" id="profileUserId" value="<%= user._id %>">

                <!-- Profile Picture Upload -->
                <div class="form-group">
                    <label>Profile Picture</label>
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <img id="profilePreviewImg" src="<%= user.profilePicture || '/images/memofy-logo.png' %>"
                            alt="Profile Preview"
                            style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #e2e8f0;">
                    </div>
                    <input type="file" id="profilePictureInput" accept="image/*" style="display: none;">
                    <button type="button" id="changePicBtn"
                        style="width: 100%; padding: 0.75rem; background: #f1f5f9; border: 1px solid #e2e8f0; border-radius: 6px; cursor: pointer;">
                        Change Profile Picture
                    </button>
                </div>

                <div class="form-group">
                    <label for="editProfileFirstName">First Name</label>
                    <input type="text" id="editProfileFirstName" value="<%= user.firstName || '' %>" required>
                </div>

                <div class="form-group">
                    <label for="editProfileLastName">Last Name</label>
                    <input type="text" id="editProfileLastName" value="<%= user.lastName || '' %>" required>
                </div>

                <div class="form-group">
                    <label for="editProfileEmail">Email</label>
                    <input type="email" id="editProfileEmail" value="<%= user.email || '' %>" required>
                </div>

                <div class="form-group">
                    <label for="editProfileDepartment">Department</label>
                    <input type="text" id="editProfileDepartment" value="<%= user.department || 'N/A' %>" disabled>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Logout Confirmation Modal -->
<div id="logoutModal" class="modal">
    <div class="modal-content" style="max-width: 400px; text-align: center;">
        <div class="modal-header" style="border: none; padding-bottom: 0;">
            <button class="close-modal"
                style="position: absolute; right: 1rem; top: 1rem; border: none; background: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
        </div>
        <div class="modal-body" style="padding: 2rem;">
            <!-- Memofy Logo -->
            <div style="margin-bottom: 1.5rem;">
                <img src="/images/memofy-logo.png" alt="Memofy Logo" style="width: 120px; height: auto;">
            </div>

            <!-- Message -->
            <h2 style="margin: 0 0 1rem; font-size: 1.25rem; font-weight: 600; color: #1e293b;">Confirm Logout</h2>
            <p style="margin: 0 0 2rem; color: #64748b; font-size: 0.875rem;">Are you sure you want to logout?</p>

            <!-- Buttons -->
            <div style="display: flex; gap: 1rem; justify-content: center;">
                <button type="button" class="btn btn-secondary" id="logoutCancelBtn"
                    style="padding: 0.75rem 1.5rem; border: 1px solid #e2e8f0; background: white; border-radius: 6px; cursor: pointer; font-weight: 500;">
                    Cancel
                </button>
                <button type="button" class="btn btn-primary" id="logoutConfirmBtn"
                    style="padding: 0.75rem 1.5rem; background: #1C89E3; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                    Confirm
                </button>
            </div>
        </div>
    </div>
</div>

<script src="/js/sidebar-hover.js"></script>
<script src="/js/profile-modal.js"></script>
<script src="/js/logout-modal.js"></script>
